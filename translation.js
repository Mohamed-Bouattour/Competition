const translations = {
    fr: {
        "nav.home": "Accueil",
        "nav.patient": "Espace Malade",
        "nav.parents": "Parents & Aidants",
        "nav.science": "Actualités Scientifiques",
        "nav.feedback": "Donner Avis",
        "nav.language": "Langue",
        "nav.sub.treatments": "Traitements",
        "nav.sub.crises": "Types de Crises",
        "nav.sub.diagnosis": "Diagnostic",
        "nav.sub.daily": "Vivre au Quotidien",
        "nav.sub.scolarity": "Scolarité",
        "nav.sub.support": "Soutien",
        "nav.sub.rescue": "Actes de Secours",

        "hero.tag": "Sensibilisation & Information",
        "hero.title": "Comprendre l'Épilepsie,",
        "hero.subtitle": "Soutenir la Vie",
        "hero.desc": "Une plateforme accessible dédiée à l'information claire et apaisée pour les patients et leurs familles.",
        "hero.cta": "Commencer la Lecture",

        "section.def.title": "Qu'est-ce que l'Épilepsie ?",
        "section.def.text": "L'épilepsie est une affection neurologique chronique. Elle se caractérise par la répétition spontanée de décharges électriques excessives dans le cerveau, que l'on appelle des crises. C'est une condition médicale fréquente qui se soigne et se stabilise.",

        "section.diff.title": "Crise vs Maladie",
        "section.diff.p1": "Une <strong>Crise Épileptique</strong> est un événement ponctuel, un 'orage électrique' passager dans le cerveau.",
        "section.diff.p2": "La <strong>Maladie Épileptique</strong> est la prédisposition chronique à faire ces crises de manière répétée.",

        "section.causes.title": "Causes Probables",
        "card.genetics.title": "Facteurs Génétiques",
        "card.genetics.text": "Certaines formes d'épilepsie sont liées à une prédisposition héréditaire.",
        "card.lesions.title": "Lésions Cérébrales",
        "card.lesions.text": "Traumatismes, AVC ou infections peuvent laisser des traces.",
        "card.dev.title": "Développement",
        "card.dev.text": "Anomalies survenant pendant la grossesse ou la naissance.",
        "card.unknown.title": "Inconnues",
        "card.unknown.text": "Dans 50% des cas, la cause précise n'est pas déterminée.",

        "footer.rights": "© 2026 ÉpiCare. Tous droits réservés.",
        "footer.partners": "En partenariat avec",

        "rescue.banner": "En cas d'urgence vitale (crise > 5 min), composez le 15 ou le 112.",
        "rescue.videos.title": "Les Gestes qui Sauvent",
        "rescue.vid1.title": "Les bons réflexes",
        "rescue.vid2.title": "Que faire en cas de crise ?",
        "rescue.step1.title": "Sécuriser",
        "rescue.step1.text": "Allonger la personne, écarter les objets dangereux, protéger la tête.",
        "rescue.step2.title": "Chronométrer",
        "rescue.step2.text": "Noter l'heure de début. Si > 5 min, appeler le 15.",
        "rescue.step3.title": "PLS",
        "rescue.step3.text": "Position Latérale de Sécurité une fois la crise terminée.",

        "science.tag": "Recherche & Innovation",
        "science.title": "Actualités Scientifiques",
        "science.desc": "Les dernières avancées de la recherche médicale sur l'épilepsie et les nouvelles technologies de détection et de traitement.",
        "science.section.title": "Dernières Publications",
        "science.cat.research": "Recherche",
        "science.cat.tech": "Technologie",
        "science.art1.title": "Nouvelles molécules en 2026",
        "science.art1.text": "Les dernières avancées sur les traitements ciblés pour les épilepsies pharmaco-résistantes.",
        "science.art2.title": "Détection par IA",
        "science.art2.text": "Comment l'intelligence artificielle aide à prédire les crises avec plus de précision.",
        "science.read.pubmed": "Lire sur PubMed",
        "science.read.scholar": "Lire sur Google Scholar"
    },
    tn: {
        "nav.home": "الرئيسية",
        "nav.patient": "فضاء المريض",
        "nav.parents": "الأولياء و العايلات",
        "nav.science": "جديد العلم",
        "nav.feedback": "عطي رايك",
        "nav.language": "اللغة",
        "nav.sub.treatments": "دوايات",
        "nav.sub.crises": "أنواع الكريز",
        "nav.sub.diagnosis": "تشخيص",
        "nav.sub.daily": "العيشة اليومية",
        "nav.sub.scolarity": "قراية",
        "nav.sub.support": "دعم نفسي",
        "nav.sub.rescue": "إسعاف أولي",

        "hero.tag": "توعية و معلومات",
        "hero.title": "إفهم الصرع،",
        "hero.subtitle": "عيش حياتك",
        "hero.desc": "منصة ساهلة باش تفهم الصرع ليك و لعايلتك، بلاش تعقيد.",
        "hero.cta": "إبدا أقرى",

        "section.def.title": "شنوة هو الصرع ؟",
        "section.def.text": "الصرع هو مرض مزمن في الراس. يجي على شكل شحنات كهربائية زايدة في المخ، اللي نسميوهم <span class='text-primary font-bold'>كريز</span> (Crises). هذا مرض موجود و يتعالج و يركح بالدواء.",

        "section.diff.title": "الكريز و المرض",
        "section.diff.p1": "<strong>الكريز</strong> (Crise) هي حاجة تصير مرة في الفال، كيما 'عاصفة' في الراس و تتعدى في وقت قصير.",
        "section.diff.p2": "<strong>المرض</strong> (Maladie) هو كي تبدا عندك القابلية باش تجيك الكريز هذي ديما و بصفة متكررة.",

        "section.causes.title": "أسباب ممكنة",
        "card.genetics.title": "وراثة",
        "card.genetics.text": "فما أنواع متاع صرع تجي م الوراثة في العايلة.",
        "card.lesions.title": "ضربة في الراس",
        "card.lesions.text": "ضربة قوية، ولا جلطة، ولا تعكر تنجم تخلي أثر (Lesion) في المخ.",
        "card.dev.title": "نمو",
        "card.dev.text": "مشاكل تنجم تصير للبيبي وقت الحبالة ولا وقت الولادة.",
        "card.unknown.title": "غير معروف",
        "card.unknown.text": "في نص الحالات تقريبًا، ما نعرفوش السبب بالضبط (Idiopathique).",

        "footer.rights": "© 2026 ÉpiCare. الحقوق محفوظة.",
        "footer.partners": "بالشراكة مع",

        "rescue.banner": "في حالة طوارئ (كريز أكثر من 5 دقايق)، أعيّط 15 ولا 112.",
        "rescue.videos.title": "الحركات اللي تنجّم",
        "rescue.vid1.title": "ردّات الفعل الصحيحة",
        "rescue.vid2.title": "شنوة تعمل وقت الكريز ؟",
        "rescue.step1.title": "أمّن",
        "rescue.step1.text": "مدّ الشخص على الأرض، بعّد الحوايج الخطيرة، حامي راسه.",
        "rescue.step2.title": "قيس الوقت",
        "rescue.step2.text": "سجّل وقتاش بدات. كان أكثر من 5 دقايق، أعيّط 15.",
        "rescue.step3.title": "PLS",
        "rescue.step3.text": "حطّه على الجنب (Position Latérale de Sécurité) كيف تعدّي الكريز.",

        "science.tag": "بحث و ابتكار",
        "science.title": "جديد العلم",
        "science.desc": "آخر الاكتشافات في الطب على الصرع و التكنولوجيا الجديدة في الكشف و العلاج.",
        "science.section.title": "آخر المنشورات",
        "science.cat.research": "بحث",
        "science.cat.tech": "تكنولوجيا",
        "science.art1.title": "أدوية جديدة في 2026",
        "science.art1.text": "آخر التطورات على الأدوية المخصصة للصرع اللي ما يستجبش للدوا.",
        "science.art2.title": "كشف بالذكاء الاصطناعي",
        "science.art2.text": "كيفاش الذكاء الاصطناعي يعاون في التنبؤ بالكريز بدقة أكبر.",
        "science.read.pubmed": "اقرأ على PubMed",
        "science.read.scholar": "اقرأ على Google Scholar"
    },
    en: {
        "nav.home": "Home",
        "nav.patient": "Patient Space",
        "nav.parents": "Parents & Caregivers",
        "nav.science": "Scientific News",
        "nav.feedback": "Feedback",
        "nav.language": "Language",
        "nav.sub.treatments": "Treatments",
        "nav.sub.crises": "Seizure Types",
        "nav.sub.diagnosis": "Diagnosis",
        "nav.sub.daily": "Daily Life",
        "nav.sub.scolarity": "Schooling",
        "nav.sub.support": "Support",
        "nav.sub.rescue": "First Aid",

        "hero.tag": "Awareness & Info",
        "hero.title": "Understand Epilepsy,",
        "hero.subtitle": "Support Life",
        "hero.desc": "An accessible platform dedicated to clear information for patients and their families.",
        "hero.cta": "Start Reading",

        "section.def.title": "What is Epilepsy?",
        "section.def.text": "Epilepsy is a chronic neurological disorder. It is characterized by recurrent spontaneous excessive electrical discharges in the brain, called seizures. It is a common medical condition that can be treated and stabilized.",

        "section.diff.title": "Seizure vs Disease",
        "section.diff.p1": "A <strong>Seizure</strong> is a single event, a temporary 'electrical storm' in the brain.",
        "section.diff.p2": "The <strong>Epilepsy Disease</strong> is the chronic predisposition to having these seizures repeatedly.",

        "section.causes.title": "Probable Causes",
        "card.genetics.title": "Genetic Factors",
        "card.genetics.text": "Some forms of epilepsy are linked to hereditary predisposition.",
        "card.lesions.title": "Brain Lesions",
        "card.lesions.text": "Head trauma, stroke, or infections can leave scars in the brain.",
        "card.dev.title": "Development",
        "card.dev.text": "Abnormalities occurring during pregnancy or birth.",
        "card.unknown.title": "Unknown",
        "card.unknown.text": "In about 50% of cases, the precise cause cannot be determined.",

        "footer.rights": "© 2026 ÉpiCare. All rights reserved.",
        "footer.partners": "In partnership with",

        "rescue.banner": "In case of a life-threatening emergency (seizure > 5 min), call 15 or 112.",
        "rescue.videos.title": "Life-Saving Actions",
        "rescue.vid1.title": "The Right Reflexes",
        "rescue.vid2.title": "What to Do During a Seizure?",
        "rescue.step1.title": "Secure",
        "rescue.step1.text": "Lay the person down, remove dangerous objects, protect their head.",
        "rescue.step2.title": "Time It",
        "rescue.step2.text": "Note the start time. If > 5 min, call emergency services.",
        "rescue.step3.title": "Recovery Position",
        "rescue.step3.text": "Place in Recovery Position once the seizure has ended.",

        "science.tag": "Research & Innovation",
        "science.title": "Scientific News",
        "science.desc": "The latest advances in medical research on epilepsy, including new detection and treatment technologies.",
        "science.section.title": "Latest Publications",
        "science.cat.research": "Research",
        "science.cat.tech": "Technology",
        "science.art1.title": "New Molecules in 2026",
        "science.art1.text": "The latest advances in targeted treatments for drug-resistant epilepsies.",
        "science.art2.title": "AI-Powered Detection",
        "science.art2.text": "How artificial intelligence is helping predict seizures with greater accuracy.",
        "science.read.pubmed": "Read on PubMed",
        "science.read.scholar": "Read on Google Scholar"
    }
};

function changeLanguage(lang) {
    const htmlTag = document.documentElement;
    const body = document.body;

    // Set Direction and Font
    if (lang === 'tn') {
        htmlTag.setAttribute('dir', 'rtl');
        htmlTag.setAttribute('lang', 'ar');
        body.style.fontFamily = "'Tajawal', 'Inter', sans-serif";
    } else {
        htmlTag.setAttribute('dir', 'ltr');
        htmlTag.setAttribute('lang', lang);
        body.style.fontFamily = "'Inter', sans-serif";
    }

    // Update Text
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            if (element.innerHTML.includes('<')) {
                element.innerHTML = translations[lang][key];
            } else {
                element.innerText = translations[lang][key];
            }
        }
    });

    localStorage.setItem('preferredLang', lang);
}

document.addEventListener('DOMContentLoaded', () => {
    // Add Google Font for Arabic dynamically if not present
    if (!document.getElementById('font-tajawal')) {
        const link = document.createElement('link');
        link.id = 'font-tajawal';
        link.rel = 'stylesheet';
        link.href = 'https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap';
        document.head.appendChild(link);
    }

    const savedLang = localStorage.getItem('preferredLang') || 'fr';
    changeLanguage(savedLang);
});
